<div>
  <p>
    {{ total() }} products
  </p>
  <ngx-masonry
    [options]="masonryOptions"
    [ordered]="true"
    [updateLayout]="updateTrigger"
    class="masonry-container"
    infiniteScroll
    [infiniteScrollDistance]="2"
    [infiniteScrollThrottle]="50"
    (scrolled)="bottomReach.emit()">
    @for (product of products(); track product.id) {
      <ngxMasonryItem class="image-item">
        <a [routerLink]="'/products/' + product.id">
          <img class="image" loading="lazy" [src]="product | productContent" alt="{{ product.name }}">
        </a>
      </ngxMasonryItem>
    } @empty {
      <p>No products found.</p>
    }
  </ngx-masonry>
</div>
